The	O
.Net	O
2.0	O
framework	O
namespace	O
supports	O
GZip	O
and	O
Deflate	O
algorithms	O
.	O
Here	O
are	O
two	O
methods	O
that	O
compress	O
and	O
decompress	O
a	O
byte	O
stream	O
which	O
you	O
can	O
get	O
from	O
your	O
file	O
object	O
.	O
You	O
can	O
subsitute	O
for	O
in	O
the	O
methods	O
below	O
to	O
use	O
that	O
algorithm	O
.	O
This	O
still	O
leaves	O
the	O
problem	O
of	O
handling	O
files	O
compressed	O
with	O
different	O
algorithms	O
though	O
.	O
public	O
static	O
byte	O
[	O
]	O
Compress	O
(	O
byte	O
[	O
]	O
data	O
)	O
{	O
MemoryStream	O
output	O
=	O
new	O
MemoryStream	O
(	O
)	O
;	O
GZipStream	O
gzip	O
=	O
new	O
GZipStream	O
(	O
output	O
,	O
CompressionMode.Compress	O
,	O
true	O
)	O
;	O
gzip.Write	O
(	O
data	O
,	O
0	O
,	O
data.Length	O
)	O
;	O
gzip.Close	O
(	O
)	O
;	O
return	O
output.ToArray	O
(	O
)	O
;	O
}	O
public	O
static	O
byte	O
[	O
]	O
Decompress	O
(	O
byte	O
[	O
]	O
data	O
)	O
{	O
MemoryStream	O
input	O
=	O
new	O
MemoryStream	O
(	O
)	O
;	O
input.Write	O
(	O
data	O
,	O
0	O
,	O
data.Length	O
)	O
;	O
input.Position	O
=	O
0	O
;	O
GZipStream	O
gzip	O
=	O
new	O
GZipStream	O
(	O
input	O
,	O
CompressionMode.Decompress	O
,	O
true	O
)	O
;	O
MemoryStream	O
output	O
=	O
new	O
MemoryStream	O
(	O
)	O
;	O
byte	O
[	O
]	O
buff	O
=	O
new	O
byte	O
[	O
64	O
]	O
;	O
int	O
read	O
=	O
-1	O
;	O
read	O
=	O
gzip.Read	O
(	O
buff	O
,	O
0	O
,	O
buff.Length	O
)	O
;	O
while	O
(	O
read	O
0	O
)	O
{	O
output.Write	O
(	O
buff	O
,	O
0	O
,	O
read	O
)	O
;	O
read	O
=	O
gzip.Read	O
(	O
buff	O
,	O
0	O
,	O
buff.Length	O
)	O
;	O
}	O
gzip.Close	O
(	O
)	O
;	O
return	O
output.ToArray	O
(	O
)	O
;	O
}	O
