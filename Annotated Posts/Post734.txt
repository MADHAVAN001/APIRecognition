I	O
was	O
bored	O
so	O
i	O
modified	O
some	O
stuff	O
i	O
wrote	O
.	O
It	O
try	O
's	O
to	O
encapsulate	O
the	O
parsing	O
in	O
an	O
OO	O
manner	O
whle	O
cutting	O
down	O
on	O
the	O
amount	O
of	O
iterations	O
through	O
the	O
file	O
,	O
it	O
only	O
iterates	O
once	O
at	O
the	O
top	O
foreach	O
.	O
using	O
System	O
;	O
using	O
System.Collections.Generic	O
;	O
using	O
System.Linq	O
;	O
using	O
System.Text	O
;	O
using	O
System.IO	O
;	O
namespace	O
ConsoleApplication1	O
{	O
class	O
Program	O
{	O
static	O
void	O
Main	O
(	O
string	O
[	O
]	O
args	O
)	O
{	O
//	O
usage	O
:	O
//	O
note	O
this	O
wont	O
run	O
as	O
getting	O
streams	O
is	O
not	O
Implemented	O
//	O
but	O
will	O
get	O
you	O
started	O
CSVFileParser	O
fileParser	O
=	O
new	O
CSVFileParser	O
(	O
)	O
;	O
//	O
TO	O
Do	O
:	O
configure	O
fileparser	O
PersonParser	O
personParser	O
=	O
new	O
PersonParser	O
(	O
fileParser	O
)	O
;	O
ListPerson	O
persons	O
=	O
new	O
ListPerson	O
(	O
)	O
;	O
//	O
if	O
the	O
file	O
is	O
large	O
and	O
there	O
is	O
a	O
good	O
way	O
to	O
limit	O
//	O
without	O
having	O
to	O
reparse	O
the	O
whole	O
file	O
you	O
can	O
use	O
a	O
//	O
linq	O
query	O
if	O
you	O
desire	O
foreach	O
(	O
Person	O
person	O
in	O
personParser.GetPersons	O
(	O
)	O
)	O
{	O
persons.Add	O
(	O
person	O
)	O
;	O
}	O
//	O
now	O
we	O
have	O
a	O
list	O
of	O
Person	O
objects	O
}	O
}	O
public	O
abstract	O
class	O
CSVParser	O
{	O
protected	O
String	O
[	O
]	O
deliniators	O
=	O
{	O
``	O
,	O
''	O
}	O
;	O
protected	O
internal	O
IEnumerableString	O
[	O
]	O
GetRecords	O
(	O
)	O
{	O
Stream	O
stream	O
=	O
GetStream	O
(	O
)	O
;	O
StreamReader	O
reader	O
=	O
new	O
StreamReader	O
(	O
stream	O
)	O
;	O
String	O
[	O
]	O
aRecord	O
;	O
while	O
(	O
!	O
reader.EndOfStream	O
)	O
{	O
aRecord	O
=	O
reader.ReadLine	O
(	O
)	O
.Split	O
(	O
deliniators	O
,	O
StringSplitOptions.None	O
)	O
;	O
yield	O
return	O
aRecord	O
;	O
}	O
}	O
protected	O
abstract	O
Stream	O
GetStream	O
(	O
)	O
;	O
}	O
public	O
class	O
CSVFileParser	O
:	O
CSVParser	O
{	O
//	O
to	O
do	O
:	O
add	O
logic	O
to	O
get	O
a	O
stream	O
from	O
a	O
file	O
protected	O
override	O
Stream	O
GetStream	O
(	O
)	O
{	O
throw	O
new	O
NotImplementedException	O
(	O
)	O
;	O
}	O
}	O
public	O
class	O
CSVWebParser	O
:	O
CSVParser	O
{	O
//	O
to	O
do	O
:	O
add	O
logic	O
to	O
get	O
a	O
stream	O
from	O
a	O
web	O
request	O
protected	O
override	O
Stream	O
GetStream	O
(	O
)	O
{	O
throw	O
new	O
NotImplementedException	O
(	O
)	O
;	O
}	O
}	O
public	O
class	O
Person	O
{	O
public	O
String	O
Name	O
{	O
get	O
;	O
set	O
;	O
}	O
public	O
String	O
Address	O
{	O
get	O
;	O
set	O
;	O
}	O
public	O
DateTime	O
DOB	O
{	O
get	O
;	O
set	O
;	O
}	O
}	O
public	O
class	O
PersonParser	O
{	O
public	O
PersonParser	O
(	O
CSVParser	O
parser	O
)	O
{	O
this.Parser	O
=	O
parser	O
;	O
}	O
public	O
CSVParser	O
Parser	O
{	O
get	O
;	O
set	O
;	O
}	O
public	O
IEnumerablePerson	O
GetPersons	O
(	O
)	O
{	O
foreach	O
(	O
String	O
[	O
]	O
record	O
in	O
this.Parser.GetRecords	O
(	O
)	O
)	O
{	O
yield	O
return	O
new	O
Person	O
(	O
)	O
{	O
Name	O
=	O
record	O
[	O
0	O
]	O
,	O
Address	O
=	O
record	O
[	O
1	O
]	O
,	O
DOB	O
=	O
DateTime.Parse	O
(	O
record	O
[	O
2	O
]	O
)	O
,	O
}	O
;	O
}	O
}	O
}	O
}	O
